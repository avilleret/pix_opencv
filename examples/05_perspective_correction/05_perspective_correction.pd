#N canvas 768 80 900 734 10;
#X declare -path ../../;
#X obj 180 76 gemhead;
#X obj 180 96 pix_share_read 666 640 480 1;
#X obj 297 186 pix_opencv_findchessboardcorners;
#X obj 17 13 declare -path ../../;
#X obj 548 6 loadbang;
#X msg 587 56 \; pd dsp 1;
#X obj 567 106 pd~ -ninsig 0 -noutsig 0 -fifo 10;
#X msg 567 86 pd~ start -open ./subprocess.pd;
#X obj 297 206 pix_texture;
#X obj 297 226 rectangle 5.333 4;
#X obj 548 166 gemwin;
#X msg 548 136 reset \, title 05_perspective_correction \, dimen 640
480 \, create \, 1;
#X msg 590 166 destroy;
#X msg 297 26 patternSize 9 6;
#X obj 180 116 pix_rgba;
#X text 238 118 <-- switch to color just;
#X text 262 128 to see openCV drawing;
#X obj 526 323 unpack;
#X floatatom 526 343 5 0 0 0 - - -;
#X floatatom 559 343 5 0 0 0 - - -;
#X obj 624 304 unpack;
#X floatatom 624 343 5 0 0 0 - - -;
#X floatatom 657 343 5 0 0 0 - - -;
#X obj 526 223 unpack;
#X floatatom 526 244 5 0 0 0 - - -;
#X floatatom 559 244 5 0 0 0 - - -;
#X obj 624 223 unpack;
#X floatatom 624 243 5 0 0 0 - - -;
#X floatatom 657 243 5 0 0 0 - - -;
#X text 510 270 contrary to OpenGL \, OpenCV coordinates are always
positives;
#X obj 180 136 pix_flip;
#X text 70 130 needed to fix;
#X text 70 140 the flip flag;
#X text 70 150 this is a bug;
#X text 152 137 -->;
#X obj 297 7 loadbang;
#X text 309 42 patternSize should match the number;
#X text 309 52 of inner corners in each direction;
#X text 510 280 and the origin (0 \, 0) is the upper left corner;
#X msg 624 203 \$17 \$18;
#X msg 486 303 \$107 \$108;
#X msg 525 203 \$1 \$2;
#X msg 472 323 \$91 \$92;
#X text 25 694 2012 - Antoine Villeret - tested on Ubuntu with pd 0.43.1
\, gem 0.93.git 1482ffb;
#X obj 548 26 t b b b;
#X text 512 359 the 4 extrem corners' coordinates;
#X obj 70 426 gemhead;
#X obj 70 446 pix_share_read \$1 2000 2000 4;
#X obj 70 658 mesh_square 10 10;
#X obj 113 537 /;
#X obj 189 537 /;
#X obj 113 493 loadbang;
#X obj 70 579 GEMglMultTransposeMatrixf;
#X obj 70 639 translateXYZ 1 1 0;
#X obj 70 559 scaleXYZ 0.003 0.003 0;
#X obj 70 599 scaleXYZ 639 479 0;
#X obj 70 468 translateXYZ -5.33333 -4 0;
#X obj 70 619 scaleXYZ 0.5 0.5 0;
#X msg 113 517 5.3333 320;
#X msg 189 517 4 240;
#N canvas 3 79 450 300 format 0;
#X obj 93 7 inlet;
#X obj 118 140 outlet;
#X msg 108 68 \$1 \$4 0 \$7 \$2 \$5 0 \$8 0 0 1 0 \$3 \$6 0 \$9;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X restore 255 529 pd format;
#N canvas 3 79 643 318 mapMatrix 0;
#X obj 110 263 pack 0 0 0 0 0 0 0 0 0;
#X floatatom 110 121 5 0 0 0 - - -;
#X floatatom 160 121 5 0 0 0 - - -;
#X floatatom 210 121 5 0 0 0 - - -;
#X floatatom 110 141 5 0 0 0 - - -;
#X floatatom 160 141 5 0 0 0 - - -;
#X floatatom 210 141 5 0 0 0 - - -;
#X floatatom 110 161 5 0 0 0 - - -;
#X floatatom 160 161 5 0 0 0 - - -;
#X floatatom 210 161 5 0 0 0 - - -;
#X obj 110 285 outlet;
#X obj 110 29 inlet;
#X obj 110 59 unpack 0 0 0 0 0 0 0 0 0;
#X obj 146 195 t b f;
#X obj 189 196 t b f;
#X obj 231 196 t b f;
#X obj 273 195 t b f;
#X obj 316 195 t b f;
#X obj 362 195 t b f;
#X obj 406 195 t b f;
#X obj 456 195 t b f;
#X connect 0 0 10 0;
#X connect 1 0 0 0;
#X connect 2 0 13 0;
#X connect 3 0 14 0;
#X connect 4 0 15 0;
#X connect 5 0 16 0;
#X connect 6 0 17 0;
#X connect 7 0 18 0;
#X connect 8 0 19 0;
#X connect 9 0 20 0;
#X connect 11 0 12 0;
#X connect 12 0 1 0;
#X connect 12 1 2 0;
#X connect 12 2 3 0;
#X connect 12 3 4 0;
#X connect 12 4 5 0;
#X connect 12 5 6 0;
#X connect 12 6 7 0;
#X connect 12 7 8 0;
#X connect 12 8 9 0;
#X connect 13 0 0 0;
#X connect 13 1 0 1;
#X connect 14 0 0 0;
#X connect 14 1 0 2;
#X connect 15 0 0 0;
#X connect 15 1 0 3;
#X connect 16 0 0 0;
#X connect 16 1 0 4;
#X connect 17 0 0 0;
#X connect 17 1 0 5;
#X connect 18 0 0 0;
#X connect 18 1 0 6;
#X connect 19 0 0 0;
#X connect 19 1 0 7;
#X connect 20 0 0 0;
#X connect 20 1 0 8;
#X coords 0 -1 1 1 150 80 1 100 100;
#X restore 255 445 pd mapMatrix;
#X obj 549 535 pix_opencv_warpperspective;
#X obj 614 462 list prepend dstMatrix;
#X obj 476 462 list prepend srcMatrix;
#X obj 549 515 list trim;
#X text 314 528 <-- transform into a 4x4;
#X text 339 538 openGL transpose matrix;
#X text 194 620 <-- some stuff to convert;
#X text 219 630 between OpenCV and OpenGL;
#X text 213 640 coordinates system;
#X text 186 599 |;
#X text 186 608 |;
#X text 186 617 |;
#X text 186 626 |;
#X text 186 635 |;
#X connect 0 0 1 0;
#X connect 1 0 14 0;
#X connect 2 0 8 0;
#X connect 2 1 42 0;
#X connect 2 1 40 0;
#X connect 2 1 41 0;
#X connect 2 1 39 0;
#X connect 4 0 44 0;
#X connect 7 0 6 0;
#X connect 8 0 9 0;
#X connect 11 0 10 0;
#X connect 12 0 10 0;
#X connect 13 0 2 0;
#X connect 14 0 30 0;
#X connect 17 0 18 0;
#X connect 17 1 19 0;
#X connect 20 0 21 0;
#X connect 20 1 22 0;
#X connect 23 0 24 0;
#X connect 23 1 25 0;
#X connect 26 0 27 0;
#X connect 26 1 28 0;
#X connect 30 0 2 0;
#X connect 35 0 13 0;
#X connect 39 0 26 0;
#X connect 40 0 20 0;
#X connect 41 0 23 0;
#X connect 42 0 17 0;
#X connect 44 0 11 0;
#X connect 44 1 7 0;
#X connect 44 2 5 0;
#X connect 46 0 47 0;
#X connect 47 0 56 0;
#X connect 49 0 54 1;
#X connect 50 0 54 2;
#X connect 51 0 58 0;
#X connect 51 0 59 0;
#X connect 52 0 55 0;
#X connect 53 0 48 0;
#X connect 54 0 52 0;
#X connect 55 0 57 0;
#X connect 56 0 54 0;
#X connect 57 0 53 0;
#X connect 58 0 49 0;
#X connect 59 0 50 0;
#X connect 60 0 52 1;
#X connect 61 0 60 0;
#X connect 62 1 61 0;
#X connect 63 0 65 0;
#X connect 64 0 65 0;
#X connect 65 0 62 0;
